import{r as y,L as E,u as G,j as o,b as O,R as l,m as x,A as R,V as w}from"./index-DxIq7Tj3.js";import{T as C}from"./chunk-2OOHT3W5-CY_e-lDa.js";import{H as $}from"./chunk-3ASUQ6PA-BxFYKP_5.js";import{B as P}from"./chunk-UVUR7MCU-8KAmHKOq.js";const T=y.createContext(null),A=t=>!t.isLayoutDirty&&t.willUpdate(!1);function I(){const t=new Set,e=new WeakMap,s=()=>t.forEach(A);return{add:n=>{t.add(n),e.set(n,n.addEventListener("willUpdate",s))},remove:n=>{t.delete(n);const r=e.get(n);r&&(r(),e.delete(n)),s()},dirty:s}}const S=t=>t===!0,M=t=>S(t===!0)||t==="id",U=({children:t,id:e,inherit:s=!0})=>{const n=y.useContext(E),r=y.useContext(T),[p,a]=G(),i=y.useRef(null),u=n.id||r;i.current===null&&(M(s)&&u&&(e=e?u+"-"+e:u),i.current={id:e,group:S(s)&&n.group||I()});const d=y.useMemo(()=>({...i.current,forceRender:p}),[a]);return o.jsx(E.Provider,{value:d,children:t})};class V{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,s){this.componentControls.forEach(n=>{n.start(e.nativeEvent||e,s)})}}const Y=()=>new V;function _(){return O(Y)}const m=(t,e)=>(t%e+e)%e,B={scale:.7,rotateY:"45deg",transformPerspective:1e3,widthProportion:.25,zIndex:0},H={scale:1.2,zIndex:1};function F({prev:t,curr:e,next:s,move:n,config:r}){var p;const{scale:a,widthProportion:i,rotateY:u,transformPerspective:d,zIndex:f}=Object.assign(Object.assign({},B),r==null?void 0:r.preview),{scale:v,zIndex:h}=Object.assign(Object.assign({},H),r==null?void 0:r.current),c=(p=r==null?void 0:r.swipeThreshold)!==null&&p!==void 0?p:1e4,g={style:{height:"100%"},variants:{enter:{opacity:0,scale:0},exit:{opacity:0,scale:0},left:{opacity:1,scale:a,zIndex:f,x:[0,-10],transition:{x:{repeat:1/0,duration:1e6}}},center:{opacity:1,scale:v,zIndex:h,x:[0,1],transition:{x:{repeat:1/0,duration:1e6}}},right:{opacity:1,scale:a,zIndex:f,x:[0,10],transition:{x:{repeat:1/0,duration:1e6}}}},layout:"position",exit:"exit",initial:"enter"},j=_(),L=k=>j.start(k);return l.createElement(U,null,l.createElement(x.div,{layoutRoot:!0,style:{height:"100%",width:"100%",display:"flex",justifyContent:"center"},onPointerDown:L},l.createElement(R,{initial:!1,mode:"popLayout"},l.createElement(x.div,Object.assign({key:t.key},g,{animate:"left",style:{height:"100%",width:`${100*i}%`,userSelect:"none"}}),l.createElement(x.div,{key:t.key,style:g.style,animate:{rotateY:u,transformPerspective:d}},t.elem)),l.createElement(x.div,Object.assign({key:e.key},g,{animate:"center",style:{height:"100%",width:`${100*(1-2*i)}%`},drag:"x",dragElastic:1,dragConstraints:{left:0,right:0},dragControls:j,onDragEnd:(k,{offset:D,velocity:z})=>{const b=Math.abs(D.x)*z.x;b<-c?n("left"):b>c&&n("right")}}),e.elem),l.createElement(x.div,Object.assign({key:s.key},g,{animate:"right",style:{height:"100%",width:`${100*i}%`,userSelect:"none"}}),l.createElement(x.div,{key:s.key,style:g.style,animate:{rotateY:`-${u}`,transformPerspective:d}},s.elem)))))}function W(t,e,s){var n;const[r,p]=y.useState((n=void 0)!==null&&n!==void 0?n:1),a=m(r,e),i=(h,c=e)=>m(h+1,c),u=(h,c=e)=>m(h-1,c),d=e,f=y.useCallback(h=>{p(c=>h==="left"?c+1:c-1)},[]),v=l.createElement(F,{prev:{elem:t({idx:u(a)}),key:m(r-1,d)},curr:{elem:t({idx:a,selected:!0}),key:m(r,d)},next:{elem:t({idx:i(a)}),key:m(r+1,d)},move:f,config:s});return{move:f,selected:a,carousel:v}}function Z({idx:t,selected:e}){return o.jsxs(w,{h:"100%",w:"100%",bg:`gray.${300+100*t}`,align:"center",justify:"center",children:[o.jsxs(C,{fontSize:"2rem",children:["Page ",t]}),e&&o.jsx(C,{children:"In View!"})]})}function X(){const{carousel:t,move:e}=W(Z,5);return o.jsxs(w,{h:"100%",w:"100%",align:"center",justify:"center",children:[o.jsx(C,{children:"Carousel previewing the previous and last pages. Swipable and controllable"}),o.jsxs($,{h:"100%",w:"100%",align:"center",justify:"center",children:[o.jsx(P,{onClick:()=>e("right"),children:"Left"}),o.jsx(w,{w:"40%",h:"80%",children:t}),o.jsx(P,{onClick:()=>e("left"),children:"Right"})]})]})}export{X as PreviewedCarousel,X as default};
